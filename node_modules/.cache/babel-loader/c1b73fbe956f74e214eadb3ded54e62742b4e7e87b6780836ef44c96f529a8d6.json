{"ast":null,"code":"var _jsxFileName = \"/Users/cephusinpursuit/Desktop/capstone-team2-frontend/prograde/src/Components/AuthModal.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { auth, googleProvider, db } from \"../config/firebase\";\nimport { createUserWithEmailAndPassword, signInWithPopup, signOut } from \"firebase/auth\";\nimport { doc, getDoc, collection, query, where, getDocs } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Auth = () => {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [user, setUser] = useState(null); // Track user authentication state\n  const [userProfile, setUserProfile] = useState({});\n  const [userComments, setUserComments] = useState([]);\n  const [userThreads, setUserThreads] = useState([]);\n  auth.onAuthStateChanged(authUser => {\n    // Check if the user is signed in\n    if (authUser) {\n      setUser(authUser);\n    } else {\n      setUser(null);\n    }\n  });\n  useEffect(() => {\n    const fetchUserData = async () => {\n      if (user) {\n        // Fetch user profile data\n        const userRef = doc(db, \"users\", user.uid);\n        const userDoc = await getDoc(userRef);\n        if (userDoc.exists()) {\n          setUserProfile(userDoc.data());\n        }\n\n        // Fetch user comments\n        const commentsRef = collection(db, \"comments\");\n        const commentsQuery = query(commentsRef, where(\"userId\", \"==\", user.uid));\n        const commentsSnapshot = await getDocs(commentsQuery);\n        setUserComments(commentsSnapshot.docs.map(doc => doc.data()));\n\n        // Fetch user threads\n        const threadsRef = collection(db, \"threads\");\n        const threadsQuery = query(threadsRef, where(\"userId\", \"==\", user.uid));\n        const threadsSnapshot = await getDocs(threadsQuery);\n        setUserThreads(threadsSnapshot.docs.map(doc => doc.data()));\n      }\n    };\n    fetchUserData();\n  }, [user]);\n  const signIn = async () => {\n    try {\n      await createUserWithEmailAndPassword(auth, email, password);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const signInWithGoogle = async () => {\n    try {\n      await signInWithPopup(auth, googleProvider);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const logout = async () => {\n    try {\n      await signOut(auth);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: user ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Welcome, \", user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: userProfile.profilePhoto,\n        alt: \"Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your Comments:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: userComments.map((comment, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: comment.text\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Your Threads:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: userThreads.map((thread, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: thread.title\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: logout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Email...\",\n          onChange: e => setEmail(e.target.value),\n          autoComplete: \"username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Password...\",\n          type: \"password\",\n          onChange: e => setPassword(e.target.value),\n          autoComplete: \"current-password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: signIn,\n          children: \"Sign In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: signInWithGoogle,\n        children: \"Sign In With Google\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(Auth, \"50pHG0P/DHstHFT7uBU7Wb5weQM=\");\n_c = Auth;\nvar _c;\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["React","useState","useEffect","auth","googleProvider","db","createUserWithEmailAndPassword","signInWithPopup","signOut","doc","getDoc","collection","query","where","getDocs","jsxDEV","_jsxDEV","Auth","_s","email","setEmail","password","setPassword","user","setUser","userProfile","setUserProfile","userComments","setUserComments","userThreads","setUserThreads","onAuthStateChanged","authUser","fetchUserData","userRef","uid","userDoc","exists","data","commentsRef","commentsQuery","commentsSnapshot","docs","map","threadsRef","threadsQuery","threadsSnapshot","signIn","err","console","error","signInWithGoogle","logout","children","fileName","_jsxFileName","lineNumber","columnNumber","src","profilePhoto","alt","comment","index","text","thread","title","onClick","placeholder","onChange","e","target","value","autoComplete","type","_c","$RefreshReg$"],"sources":["/Users/cephusinpursuit/Desktop/capstone-team2-frontend/prograde/src/Components/AuthModal.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { auth, googleProvider, db } from \"../config/firebase\";\nimport { createUserWithEmailAndPassword, signInWithPopup, signOut } from \"firebase/auth\";\nimport { doc, getDoc, collection, query, where, getDocs } from \"firebase/firestore\";\n\nexport const Auth = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [user, setUser] = useState(null); // Track user authentication state\n  const [userProfile, setUserProfile] = useState({});\n  const [userComments, setUserComments] = useState([]);\n  const [userThreads, setUserThreads] = useState([]);\n\n  auth.onAuthStateChanged((authUser) => {\n    // Check if the user is signed in\n    if (authUser) {\n      setUser(authUser);\n    } else {\n      setUser(null);\n    }\n  });\n\n  useEffect(() => {\n    const fetchUserData = async () => {\n      if (user) {\n        // Fetch user profile data\n        const userRef = doc(db, \"users\", user.uid);\n        const userDoc = await getDoc(userRef);\n        if (userDoc.exists()) {\n          setUserProfile(userDoc.data());\n        }\n\n        // Fetch user comments\n        const commentsRef = collection(db, \"comments\");\n        const commentsQuery = query(commentsRef, where(\"userId\", \"==\", user.uid));\n        const commentsSnapshot = await getDocs(commentsQuery);\n        setUserComments(commentsSnapshot.docs.map(doc => doc.data()));\n\n        // Fetch user threads\n        const threadsRef = collection(db, \"threads\");\n        const threadsQuery = query(threadsRef, where(\"userId\", \"==\", user.uid));\n        const threadsSnapshot = await getDocs(threadsQuery);\n        setUserThreads(threadsSnapshot.docs.map(doc => doc.data()));\n      }\n    };\n\n    fetchUserData();\n  }, [user]);\n\n  const signIn = async () => {\n    try {\n      await createUserWithEmailAndPassword(auth, email, password);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const signInWithGoogle = async () => {\n    try {\n      await signInWithPopup(auth, googleProvider);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const logout = async () => {\n    try {\n      await signOut(auth);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return (\n    <div>\n      {user ? (\n        <div>\n          <p>Welcome, {user.email}</p>\n          <img src={userProfile.profilePhoto} alt=\"Profile\" />\n          <h3>Your Comments:</h3>\n          <ul>\n            {userComments.map((comment, index) => (\n              <li key={index}>{comment.text}</li>\n            ))}\n          </ul>\n          <h3>Your Threads:</h3>\n          <ul>\n            {userThreads.map((thread, index) => (\n              <li key={index}>{thread.title}</li>\n            ))}\n          </ul>\n          <button onClick={logout}>Logout</button>\n        </div>\n      ) : (\n        <div>\n          <h2>Login</h2>\n          <form>\n            <input\n              placeholder=\"Email...\"\n              onChange={(e) => setEmail(e.target.value)}\n              autoComplete=\"username\"\n            />\n            <input\n              placeholder=\"Password...\"\n              type=\"password\"\n              onChange={(e) => setPassword(e.target.value)}\n              autoComplete=\"current-password\"\n            />\n            <button onClick={signIn}>Sign In</button>\n          </form>\n          <button onClick={signInWithGoogle}>Sign In With Google</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}